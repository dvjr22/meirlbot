{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/bundle/programs/server/packages/base64.js","filenameRelative":"/bundle/programs/server/packages/base64.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/bundle/programs/server/packages/base64.js.map","sourceFileName":"/bundle/programs/server/packages/base64.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"base64"},"ignored":false,"code":"(function () {\n\n  /* Imports */\n  var Meteor = Package.meteor.Meteor;\n  var global = Package.meteor.global;\n  var meteorEnv = Package.meteor.meteorEnv;\n\n  /* Package-scope variables */\n  var Base64;\n\n  (function () {\n\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //                                                                                      //\n    // packages/base64/base64.js                                                            //\n    //                                                                                      //\n    //////////////////////////////////////////////////////////////////////////////////////////\n    //\n    // Base 64 encoding\n\n    var BASE_64_CHARS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n    var BASE_64_VALS = {};\n\n    for (var i = 0; i < BASE_64_CHARS.length; i++) {\n      BASE_64_VALS[BASE_64_CHARS.charAt(i)] = i;\n    };\n\n    Base64 = {};\n\n    Base64.encode = function (array) {\n\n      if (typeof array === \"string\") {\n        var str = array;\n        array = Base64.newBinary(str.length);\n        for (var i = 0; i < str.length; i++) {\n          var ch = str.charCodeAt(i);\n          if (ch > 0xFF) {\n            throw new Error(\"Not ascii. Base64.encode can only take ascii strings.\");\n          }\n          array[i] = ch;\n        }\n      }\n\n      var answer = [];\n      var a = null;\n      var b = null;\n      var c = null;\n      var d = null;\n      for (var i = 0; i < array.length; i++) {\n        switch (i % 3) {\n          case 0:\n            a = array[i] >> 2 & 0x3F;\n            b = (array[i] & 0x03) << 4;\n            break;\n          case 1:\n            b = b | array[i] >> 4 & 0xF;\n            c = (array[i] & 0xF) << 2;\n            break;\n          case 2:\n            c = c | array[i] >> 6 & 0x03;\n            d = array[i] & 0x3F;\n            answer.push(getChar(a));\n            answer.push(getChar(b));\n            answer.push(getChar(c));\n            answer.push(getChar(d));\n            a = null;\n            b = null;\n            c = null;\n            d = null;\n            break;\n        }\n      }\n      if (a != null) {\n        answer.push(getChar(a));\n        answer.push(getChar(b));\n        if (c == null) answer.push('=');else answer.push(getChar(c));\n        if (d == null) answer.push('=');\n      }\n      return answer.join(\"\");\n    };\n\n    var getChar = function getChar(val) {\n      return BASE_64_CHARS.charAt(val);\n    };\n\n    var getVal = function getVal(ch) {\n      if (ch === '=') {\n        return -1;\n      }\n      return BASE_64_VALS[ch];\n    };\n\n    // XXX This is a weird place for this to live, but it's used both by\n    // this package and 'ejson', and we can't put it in 'ejson' without\n    // introducing a circular dependency. It should probably be in its own\n    // package or as a helper in a package that both 'base64' and 'ejson'\n    // use.\n    Base64.newBinary = function (len) {\n      if (typeof Uint8Array === 'undefined' || typeof ArrayBuffer === 'undefined') {\n        var ret = [];\n        for (var i = 0; i < len; i++) {\n          ret.push(0);\n        }\n        ret.$Uint8ArrayPolyfill = true;\n        return ret;\n      }\n      return new Uint8Array(new ArrayBuffer(len));\n    };\n\n    Base64.decode = function (str) {\n      var len = Math.floor(str.length * 3 / 4);\n      if (str.charAt(str.length - 1) == '=') {\n        len--;\n        if (str.charAt(str.length - 2) == '=') len--;\n      }\n      var arr = Base64.newBinary(len);\n\n      var one = null;\n      var two = null;\n      var three = null;\n\n      var j = 0;\n\n      for (var i = 0; i < str.length; i++) {\n        var c = str.charAt(i);\n        var v = getVal(c);\n        switch (i % 4) {\n          case 0:\n            if (v < 0) throw new Error('invalid base64 string');\n            one = v << 2;\n            break;\n          case 1:\n            if (v < 0) throw new Error('invalid base64 string');\n            one = one | v >> 4;\n            arr[j++] = one;\n            two = (v & 0x0F) << 4;\n            break;\n          case 2:\n            if (v >= 0) {\n              two = two | v >> 2;\n              arr[j++] = two;\n              three = (v & 0x03) << 6;\n            }\n            break;\n          case 3:\n            if (v >= 0) {\n              arr[j++] = three | v;\n            }\n            break;\n        }\n      }\n      return arr;\n    };\n\n    //////////////////////////////////////////////////////////////////////////////////////////\n  }).call(this);\n\n  /* Exports */\n  if (typeof Package === 'undefined') Package = {};\n  (function (pkg, symbols) {\n    for (var s in symbols) {\n      s in pkg || (pkg[s] = symbols[s]);\n    }\n  })(Package.base64 = {}, {\n    Base64: Base64\n  });\n})();\n\n//# sourceMappingURL=base64.js.map","ast":null,"map":{"version":3,"sources":["/bundle/programs/server/packages/base64.js"],"names":[],"mappings":"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","file":"/bundle/programs/server/packages/base64.js.map","sourcesContent":["(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\n\n/* Package-scope variables */\nvar Base64;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                      //\n// packages/base64/base64.js                                                            //\n//                                                                                      //\n//////////////////////////////////////////////////////////////////////////////////////////\n                                                                                        //\n// Base 64 encoding\n\nvar BASE_64_CHARS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\nvar BASE_64_VALS = {};\n\nfor (var i = 0; i < BASE_64_CHARS.length; i++) {\n  BASE_64_VALS[BASE_64_CHARS.charAt(i)] = i;\n};\n\nBase64 = {};\n\nBase64.encode = function (array) {\n\n  if (typeof array === \"string\") {\n    var str = array;\n    array = Base64.newBinary(str.length);\n    for (var i = 0; i < str.length; i++) {\n      var ch = str.charCodeAt(i);\n      if (ch > 0xFF) {\n        throw new Error(\n          \"Not ascii. Base64.encode can only take ascii strings.\");\n      }\n      array[i] = ch;\n    }\n  }\n\n  var answer = [];\n  var a = null;\n  var b = null;\n  var c = null;\n  var d = null;\n  for (var i = 0; i < array.length; i++) {\n    switch (i % 3) {\n    case 0:\n      a = (array[i] >> 2) & 0x3F;\n      b = (array[i] & 0x03) << 4;\n      break;\n    case 1:\n      b = b | (array[i] >> 4) & 0xF;\n      c = (array[i] & 0xF) << 2;\n      break;\n    case 2:\n      c = c | (array[i] >> 6) & 0x03;\n      d = array[i] & 0x3F;\n      answer.push(getChar(a));\n      answer.push(getChar(b));\n      answer.push(getChar(c));\n      answer.push(getChar(d));\n      a = null;\n      b = null;\n      c = null;\n      d = null;\n      break;\n    }\n  }\n  if (a != null) {\n    answer.push(getChar(a));\n    answer.push(getChar(b));\n    if (c == null)\n      answer.push('=');\n    else\n      answer.push(getChar(c));\n    if (d == null)\n      answer.push('=');\n  }\n  return answer.join(\"\");\n};\n\nvar getChar = function (val) {\n  return BASE_64_CHARS.charAt(val);\n};\n\nvar getVal = function (ch) {\n  if (ch === '=') {\n    return -1;\n  }\n  return BASE_64_VALS[ch];\n};\n\n// XXX This is a weird place for this to live, but it's used both by\n// this package and 'ejson', and we can't put it in 'ejson' without\n// introducing a circular dependency. It should probably be in its own\n// package or as a helper in a package that both 'base64' and 'ejson'\n// use.\nBase64.newBinary = function (len) {\n  if (typeof Uint8Array === 'undefined' || typeof ArrayBuffer === 'undefined') {\n    var ret = [];\n    for (var i = 0; i < len; i++) {\n      ret.push(0);\n    }\n    ret.$Uint8ArrayPolyfill = true;\n    return ret;\n  }\n  return new Uint8Array(new ArrayBuffer(len));\n};\n\nBase64.decode = function (str) {\n  var len = Math.floor((str.length*3)/4);\n  if (str.charAt(str.length - 1) == '=') {\n    len--;\n    if (str.charAt(str.length - 2) == '=')\n      len--;\n  }\n  var arr = Base64.newBinary(len);\n\n  var one = null;\n  var two = null;\n  var three = null;\n\n  var j = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charAt(i);\n    var v = getVal(c);\n    switch (i % 4) {\n    case 0:\n      if (v < 0)\n        throw new Error('invalid base64 string');\n      one = v << 2;\n      break;\n    case 1:\n      if (v < 0)\n        throw new Error('invalid base64 string');\n      one = one | (v >> 4);\n      arr[j++] = one;\n      two = (v & 0x0F) << 4;\n      break;\n    case 2:\n      if (v >= 0) {\n        two = two | (v >> 2);\n        arr[j++] = two;\n        three = (v & 0x03) << 6;\n      }\n      break;\n    case 3:\n      if (v >= 0) {\n        arr[j++] = three | v;\n      }\n      break;\n    }\n  }\n  return arr;\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\n(function (pkg, symbols) {\n  for (var s in symbols)\n    (s in pkg) || (pkg[s] = symbols[s]);\n})(Package.base64 = {}, {\n  Base64: Base64\n});\n\n})();\n\n//# sourceMappingURL=base64.js.map\n"]},"hash":"0015b24bd5569092f2fe96abe8fb3fc882f6cb61"}
