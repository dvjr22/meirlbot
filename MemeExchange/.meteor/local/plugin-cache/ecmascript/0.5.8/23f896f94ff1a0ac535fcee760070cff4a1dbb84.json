{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/bundle/programs/server/packages/babel-compiler.js","filenameRelative":"/bundle/programs/server/packages/babel-compiler.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/bundle/programs/server/packages/babel-compiler.js.map","sourceFileName":"/bundle/programs/server/packages/babel-compiler.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"babel-compiler"},"ignored":false,"code":"(function () {\n\n  /* Imports */\n  var Meteor = Package.meteor.Meteor;\n  var global = Package.meteor.global;\n  var meteorEnv = Package.meteor.meteorEnv;\n  var _Symbol = Package['ecmascript-runtime'].Symbol;\n  var Map = Package['ecmascript-runtime'].Map;\n  var Set = Package['ecmascript-runtime'].Set;\n\n  /* Package-scope variables */\n  var Babel, BabelCompiler;\n\n  (function () {\n\n    ////////////////////////////////////////////////////////////////////////////////\n    //                                                                            //\n    // packages/babel-compiler/babel.js                                           //\n    //                                                                            //\n    ////////////////////////////////////////////////////////////////////////////////\n    //\n    var meteorBabel = Npm.require('meteor-babel');\n\n    /**\n     * Returns a new object containing default options appropriate for\n     */\n    function getDefaultOptions(extraFeatures) {\n      // See https://github.com/meteor/babel/blob/master/options.js for more\n      // information about what the default options are.\n      var options = meteorBabel.getDefaultOptions(extraFeatures);\n\n      // The sourceMap option should probably be removed from the default\n      // options returned by meteorBabel.getDefaultOptions.\n      delete options.sourceMap;\n\n      return options;\n    }\n\n    Babel = {\n      getDefaultOptions: getDefaultOptions,\n\n      // Deprecated, now a no-op.\n      validateExtraFeatures: Function.prototype,\n\n      compile: function compile(source, options) {\n        options = options || getDefaultOptions();\n        return meteorBabel.compile(source, options);\n      },\n\n      setCacheDir: function setCacheDir(cacheDir) {\n        meteorBabel.setCacheDir(cacheDir);\n      }\n    };\n\n    ////////////////////////////////////////////////////////////////////////////////\n  }).call(this);\n\n  (function () {\n\n    ////////////////////////////////////////////////////////////////////////////////\n    //                                                                            //\n    // packages/babel-compiler/babel-compiler.js                                  //\n    //                                                                            //\n    ////////////////////////////////////////////////////////////////////////////////\n    //\n    /**\n     * A compiler that can be instantiated with features and used inside\n     * Plugin.registerCompiler\n     * @param {Object} extraFeatures The same object that getDefaultOptions takes\n     */\n    BabelCompiler = function BabelCompiler(extraFeatures) {\n      this.extraFeatures = extraFeatures;\n      this._babelrcCache = null;\n      this._babelrcWarnings = Object.create(null);\n    };\n\n    var BCp = BabelCompiler.prototype;\n    var excludedFileExtensionPattern = /\\.(es5|min)\\.js$/i;\n    var hasOwn = Object.prototype.hasOwnProperty;\n\n    BCp.processFilesForTarget = function (inputFiles) {\n      // Reset this cache for each batch processed.\n      this._babelrcCache = null;\n\n      inputFiles.forEach(function (inputFile) {\n        var toBeAdded = this.processOneFileForTarget(inputFile);\n        if (toBeAdded) {\n          inputFile.addJavaScript(toBeAdded);\n        }\n      }, this);\n    };\n\n    // Returns an object suitable for passing to inputFile.addJavaScript, or\n    // null to indicate there was an error, and nothing should be added.\n    BCp.processOneFileForTarget = function (inputFile, source) {\n      this._babelrcCache = this._babelrcCache || Object.create(null);\n\n      if (typeof source !== \"string\") {\n        // Other compiler plugins can call processOneFileForTarget with a\n        // source string that's different from inputFile.getContentsAsString()\n        // if they've already done some processing.\n        source = inputFile.getContentsAsString();\n      }\n\n      var packageName = inputFile.getPackageName();\n      var inputFilePath = inputFile.getPathInPackage();\n      var outputFilePath = inputFilePath;\n      var fileOptions = inputFile.getFileOptions();\n      var toBeAdded = {\n        sourcePath: inputFilePath,\n        path: outputFilePath,\n        data: source,\n        hash: inputFile.getSourceHash(),\n        sourceMap: null,\n        bare: !!fileOptions.bare\n      };\n      var cacheDeps = {\n        sourceHash: toBeAdded.hash\n      };\n\n      // If you need to exclude a specific file within a package from Babel\n      // compilation, pass the { transpile: false } options to api.addFiles\n      // when you add that file.\n      if (fileOptions.transpile !== false &&\n      // Bare files should not be transpiled by Babel, because they do not\n      // have access to CommonJS APIs like `require`, `module`, `exports`.\n      !toBeAdded.bare &&\n      // If you need to exclude a specific file within an app from Babel\n      // compilation, give it the following file extension: .es5.js\n      !excludedFileExtensionPattern.test(inputFilePath)) {\n\n        var targetCouldBeInternetExplorer8 = inputFile.getArch() === \"web.browser\";\n\n        var extraFeatures = Object.assign({}, this.extraFeatures);\n\n        if (!extraFeatures.hasOwnProperty(\"jscript\")) {\n          // Perform some additional transformations to improve compatibility\n          // in older browsers (e.g. wrapping named function expressions, per\n          // http://kiro.me/blog/nfe_dilemma.html).\n          extraFeatures.jscript = targetCouldBeInternetExplorer8;\n        }\n\n        var babelOptions = Babel.getDefaultOptions(extraFeatures);\n\n        this.inferExtraBabelOptions(inputFile, babelOptions, cacheDeps);\n\n        babelOptions.sourceMap = true;\n        babelOptions.filename = babelOptions.sourceFileName = packageName ? \"/packages/\" + packageName + \"/\" + inputFilePath : \"/\" + inputFilePath;\n\n        babelOptions.sourceMapTarget = babelOptions.filename + \".map\";\n\n        try {\n          var result = profile('Babel.compile', function () {\n            return Babel.compile(source, babelOptions, cacheDeps);\n          });\n        } catch (e) {\n          if (e.loc) {\n            inputFile.error({\n              message: e.message,\n              line: e.loc.line,\n              column: e.loc.column\n            });\n\n            return null;\n          }\n\n          throw e;\n        }\n\n        toBeAdded.data = result.code;\n        toBeAdded.hash = result.hash;\n        toBeAdded.sourceMap = result.map;\n      }\n\n      return toBeAdded;\n    };\n\n    BCp.setDiskCacheDirectory = function (cacheDir) {\n      Babel.setCacheDir(cacheDir);\n    };\n\n    function profile(name, func) {\n      if (typeof Profile !== 'undefined') {\n        return Profile.time(name, func);\n      } else {\n        return func();\n      }\n    };\n\n    BCp.inferExtraBabelOptions = function (inputFile, babelOptions, cacheDeps) {\n      if (!inputFile.require || !inputFile.findControlFile || !inputFile.readAndWatchFile) {\n        return false;\n      }\n\n      return(\n        // If a .babelrc exists, it takes precedence over package.json.\n        this._inferFromBabelRc(inputFile, babelOptions, cacheDeps) || this._inferFromPackageJson(inputFile, babelOptions, cacheDeps)\n      );\n    };\n\n    BCp._inferFromBabelRc = function (inputFile, babelOptions, cacheDeps) {\n      var babelrcPath = inputFile.findControlFile(\".babelrc\");\n      if (babelrcPath) {\n        if (!hasOwn.call(this._babelrcCache, babelrcPath)) {\n          this._babelrcCache[babelrcPath] = JSON.parse(inputFile.readAndWatchFile(babelrcPath));\n        }\n\n        return this._inferHelper(inputFile, babelOptions, babelrcPath, this._babelrcCache[babelrcPath], cacheDeps);\n      }\n    };\n\n    BCp._inferFromPackageJson = function (inputFile, babelOptions, cacheDeps) {\n      var pkgJsonPath = inputFile.findControlFile(\"package.json\");\n      if (pkgJsonPath) {\n        if (!hasOwn.call(this._babelrcCache, pkgJsonPath)) {\n          this._babelrcCache[pkgJsonPath] = JSON.parse(inputFile.readAndWatchFile(pkgJsonPath)).babel || null;\n        }\n\n        return this._inferHelper(inputFile, babelOptions, pkgJsonPath, this._babelrcCache[pkgJsonPath], cacheDeps);\n      }\n    };\n\n    BCp._inferHelper = function (inputFile, babelOptions, controlFilePath, babelrc, cacheDeps) {\n      if (!babelrc) {\n        return false;\n      }\n\n      var compiler = this;\n      var inferredPresets = [];\n      var result;\n\n      function infer(listName, prefix) {\n        var list = babelrc[listName];\n        if (!Array.isArray(list) || list.length === 0) {\n          return;\n        }\n\n        function req(id) {\n          try {\n            return reqMightThrow(id);\n          } catch (e) {\n            if (e.code !== \"MODULE_NOT_FOUND\") {\n              throw e;\n            }\n\n            if (!hasOwn.call(compiler._babelrcWarnings, id)) {\n              compiler._babelrcWarnings[id] = controlFilePath;\n\n              console.error(\"Warning: unable to resolve \" + JSON.stringify(id) + \" in \" + listName + \" of \" + controlFilePath);\n            }\n\n            return null;\n          }\n        }\n\n        function reqMightThrow(id) {\n          var isTopLevel = \"./\".indexOf(id.charAt(0)) < 0;\n          var presetOrPlugin;\n          var presetOrPluginMeta;\n\n          if (isTopLevel) {\n            try {\n              // If the identifier is top-level, try to prefix it with\n              // \"babel-plugin-\" or \"babel-preset-\".\n              presetOrPlugin = inputFile.require(prefix + id);\n              presetOrPluginMeta = inputFile.require(packageNameFromTopLevelModuleId(prefix + id) + '/package.json');\n            } catch (e) {\n              if (e.code !== \"MODULE_NOT_FOUND\") {\n                throw e;\n              }\n              // Fall back to requiring the plugin as-is if the prefix failed.\n              presetOrPlugin = inputFile.require(id);\n              presetOrPluginMeta = inputFile.require(packageNameFromTopLevelModuleId(id) + '/package.json');\n            }\n          } else {\n            // If the identifier is not top-level, but relative or absolute,\n            // then it will be required as-is, so that you can implement your\n            // own Babel plugins locally, rather than always using plugins\n            // installed from npm.\n            presetOrPlugin = inputFile.require(id, controlFilePath);\n\n            // Note that inputFile.readAndWatchFileWithHash converts module\n            // identifers to OS-specific paths if necessary.\n            var absId = inputFile.resolve(id, controlFilePath);\n            var info = inputFile.readAndWatchFileWithHash(absId);\n\n            presetOrPluginMeta = {\n              name: absId,\n              version: info.hash\n            };\n          }\n\n          return {\n            name: presetOrPluginMeta.name,\n            version: presetOrPluginMeta.version,\n            module: presetOrPlugin.__esModule ? presetOrPlugin['default'] : presetOrPlugin\n          };\n        }\n\n        var filtered = [];\n\n        list.forEach(function (item, i) {\n          if (typeof item === \"string\") {\n            result = req(item);\n            if (!result) return;\n            item = result.module;\n            cacheDeps[result.name] = result.version;\n          } else if (Array.isArray(item) && typeof item[0] === \"string\") {\n            item = item.slice(); // defensive copy\n            result = req(item[0]);\n            if (!result) return;\n            item[0] = result.module;\n            cacheDeps[result.name] = result.version;\n          }\n          // else, an object { presets: [], plugins: [] } from meteorBabel, whose\n          // version is used for the cache hash internally.\n\n          filtered.push(item);\n        });\n\n        if (listName === \"plugins\") {\n          // Turn any additional plugins into their own preset, so that they\n          // can come before babel-preset-meteor.\n          inferredPresets.push({ plugins: filtered });\n        } else if (listName === \"presets\") {\n          inferredPresets.push.apply(inferredPresets, filtered);\n        }\n      }\n\n      infer(\"presets\", \"babel-preset-\");\n      infer(\"plugins\", \"babel-plugin-\");\n\n      if (inferredPresets.length > 0) {\n        babelOptions.presets.push.apply(babelOptions.presets, inferredPresets);\n\n        return true;\n      }\n\n      return false;\n    };\n\n    // 'react-hot-loader/babel' => 'react-hot-loader'\n    function packageNameFromTopLevelModuleId(id) {\n      return id.split(\"/\", 1)[0];\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////\n  }).call(this);\n\n  /* Exports */\n  if (typeof Package === 'undefined') Package = {};\n  (function (pkg, symbols) {\n    for (var s in symbols) {\n      s in pkg || (pkg[s] = symbols[s]);\n    }\n  })(Package['babel-compiler'] = {}, {\n    Babel: Babel,\n    BabelCompiler: BabelCompiler\n  });\n})();\n\n//# sourceMappingURL=babel-compiler.js.map","ast":null,"map":{"version":3,"sources":["/bundle/programs/server/packages/babel-compiler.js"],"names":[],"mappings":"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","file":"/bundle/programs/server/packages/babel-compiler.js.map","sourcesContent":["(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Symbol = Package['ecmascript-runtime'].Symbol;\nvar Map = Package['ecmascript-runtime'].Map;\nvar Set = Package['ecmascript-runtime'].Set;\n\n/* Package-scope variables */\nvar Babel, BabelCompiler;\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////\n//                                                                            //\n// packages/babel-compiler/babel.js                                           //\n//                                                                            //\n////////////////////////////////////////////////////////////////////////////////\n                                                                              //\nvar meteorBabel = Npm.require('meteor-babel');\n\n/**\n * Returns a new object containing default options appropriate for\n */\nfunction getDefaultOptions(extraFeatures) {\n  // See https://github.com/meteor/babel/blob/master/options.js for more\n  // information about what the default options are.\n  var options = meteorBabel.getDefaultOptions(extraFeatures);\n\n  // The sourceMap option should probably be removed from the default\n  // options returned by meteorBabel.getDefaultOptions.\n  delete options.sourceMap;\n\n  return options;\n}\n\nBabel = {\n  getDefaultOptions: getDefaultOptions,\n\n  // Deprecated, now a no-op.\n  validateExtraFeatures: Function.prototype,\n\n  compile: function (source, options) {\n    options = options || getDefaultOptions();\n    return meteorBabel.compile(source, options);\n  },\n\n  setCacheDir: function (cacheDir) {\n    meteorBabel.setCacheDir(cacheDir);\n  }\n};\n\n////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////\n//                                                                            //\n// packages/babel-compiler/babel-compiler.js                                  //\n//                                                                            //\n////////////////////////////////////////////////////////////////////////////////\n                                                                              //\n/**\n * A compiler that can be instantiated with features and used inside\n * Plugin.registerCompiler\n * @param {Object} extraFeatures The same object that getDefaultOptions takes\n */\nBabelCompiler = function BabelCompiler(extraFeatures) {\n  this.extraFeatures = extraFeatures;\n  this._babelrcCache = null;\n  this._babelrcWarnings = Object.create(null);\n};\n\nvar BCp = BabelCompiler.prototype;\nvar excludedFileExtensionPattern = /\\.(es5|min)\\.js$/i;\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nBCp.processFilesForTarget = function (inputFiles) {\n  // Reset this cache for each batch processed.\n  this._babelrcCache = null;\n\n  inputFiles.forEach(function (inputFile) {\n    var toBeAdded = this.processOneFileForTarget(inputFile);\n    if (toBeAdded) {\n      inputFile.addJavaScript(toBeAdded);\n    }\n  }, this);\n};\n\n// Returns an object suitable for passing to inputFile.addJavaScript, or\n// null to indicate there was an error, and nothing should be added.\nBCp.processOneFileForTarget = function (inputFile, source) {\n  this._babelrcCache = this._babelrcCache || Object.create(null);\n\n  if (typeof source !== \"string\") {\n    // Other compiler plugins can call processOneFileForTarget with a\n    // source string that's different from inputFile.getContentsAsString()\n    // if they've already done some processing.\n    source = inputFile.getContentsAsString();\n  }\n\n  var packageName = inputFile.getPackageName();\n  var inputFilePath = inputFile.getPathInPackage();\n  var outputFilePath = inputFilePath;\n  var fileOptions = inputFile.getFileOptions();\n  var toBeAdded = {\n    sourcePath: inputFilePath,\n    path: outputFilePath,\n    data: source,\n    hash: inputFile.getSourceHash(),\n    sourceMap: null,\n    bare: !! fileOptions.bare\n  };\n  var cacheDeps = {\n    sourceHash: toBeAdded.hash\n  };\n\n  // If you need to exclude a specific file within a package from Babel\n  // compilation, pass the { transpile: false } options to api.addFiles\n  // when you add that file.\n  if (fileOptions.transpile !== false &&\n      // Bare files should not be transpiled by Babel, because they do not\n      // have access to CommonJS APIs like `require`, `module`, `exports`.\n      ! toBeAdded.bare &&\n      // If you need to exclude a specific file within an app from Babel\n      // compilation, give it the following file extension: .es5.js\n      ! excludedFileExtensionPattern.test(inputFilePath)) {\n\n    var targetCouldBeInternetExplorer8 =\n      inputFile.getArch() === \"web.browser\";\n\n    var extraFeatures = Object.assign({}, this.extraFeatures);\n\n    if (! extraFeatures.hasOwnProperty(\"jscript\")) {\n      // Perform some additional transformations to improve compatibility\n      // in older browsers (e.g. wrapping named function expressions, per\n      // http://kiro.me/blog/nfe_dilemma.html).\n      extraFeatures.jscript = targetCouldBeInternetExplorer8;\n    }\n\n    var babelOptions = Babel.getDefaultOptions(extraFeatures);\n\n    this.inferExtraBabelOptions(inputFile, babelOptions, cacheDeps);\n\n    babelOptions.sourceMap = true;\n    babelOptions.filename =\n      babelOptions.sourceFileName = packageName\n      ? \"/packages/\" + packageName + \"/\" + inputFilePath\n      : \"/\" + inputFilePath;\n\n    babelOptions.sourceMapTarget = babelOptions.filename + \".map\";\n\n    try {\n      var result = profile('Babel.compile', function () {\n        return Babel.compile(source, babelOptions, cacheDeps);\n      });\n    } catch (e) {\n      if (e.loc) {\n        inputFile.error({\n          message: e.message,\n          line: e.loc.line,\n          column: e.loc.column,\n        });\n\n        return null;\n      }\n\n      throw e;\n    }\n\n    toBeAdded.data = result.code;\n    toBeAdded.hash = result.hash;\n    toBeAdded.sourceMap = result.map;\n  }\n\n  return toBeAdded;\n};\n\nBCp.setDiskCacheDirectory = function (cacheDir) {\n  Babel.setCacheDir(cacheDir);\n};\n\nfunction profile(name, func) {\n  if (typeof Profile !== 'undefined') {\n    return Profile.time(name, func);\n  } else {\n    return func();\n  }\n};\n\nBCp.inferExtraBabelOptions = function (inputFile, babelOptions, cacheDeps) {\n  if (! inputFile.require ||\n      ! inputFile.findControlFile ||\n      ! inputFile.readAndWatchFile) {\n    return false;\n  }\n\n  return (\n    // If a .babelrc exists, it takes precedence over package.json.\n    this._inferFromBabelRc(inputFile, babelOptions, cacheDeps) ||\n    this._inferFromPackageJson(inputFile, babelOptions, cacheDeps)\n  );\n};\n\nBCp._inferFromBabelRc = function (inputFile, babelOptions, cacheDeps) {\n  var babelrcPath = inputFile.findControlFile(\".babelrc\");\n  if (babelrcPath) {\n    if (! hasOwn.call(this._babelrcCache, babelrcPath)) {\n      this._babelrcCache[babelrcPath] =\n        JSON.parse(inputFile.readAndWatchFile(babelrcPath));\n    }\n\n    return this._inferHelper(\n      inputFile,\n      babelOptions,\n      babelrcPath,\n      this._babelrcCache[babelrcPath],\n      cacheDeps\n    );\n  }\n};\n\nBCp._inferFromPackageJson = function (inputFile, babelOptions, cacheDeps) {\n  var pkgJsonPath = inputFile.findControlFile(\"package.json\");\n  if (pkgJsonPath) {\n    if (! hasOwn.call(this._babelrcCache, pkgJsonPath)) {\n      this._babelrcCache[pkgJsonPath] = JSON.parse(\n        inputFile.readAndWatchFile(pkgJsonPath)\n      ).babel || null;\n    }\n\n    return this._inferHelper(\n      inputFile,\n      babelOptions,\n      pkgJsonPath,\n      this._babelrcCache[pkgJsonPath],\n      cacheDeps\n    );\n  }\n};\n\nBCp._inferHelper = function (\n  inputFile,\n  babelOptions,\n  controlFilePath,\n  babelrc,\n  cacheDeps\n) {\n  if (! babelrc) {\n    return false;\n  }\n\n  var compiler = this;\n  var inferredPresets = [];\n  var result;\n\n  function infer(listName, prefix) {\n    var list = babelrc[listName];\n    if (! Array.isArray(list) || list.length === 0) {\n      return;\n    }\n\n    function req(id) {\n      try {\n        return reqMightThrow(id);\n      } catch (e) {\n        if (e.code !== \"MODULE_NOT_FOUND\") {\n          throw e;\n        }\n\n        if (! hasOwn.call(compiler._babelrcWarnings, id)) {\n          compiler._babelrcWarnings[id] = controlFilePath;\n\n          console.error(\n            \"Warning: unable to resolve \" +\n              JSON.stringify(id) +\n              \" in \" + listName +\n              \" of \" + controlFilePath\n          );\n        }\n\n        return null;\n      }\n    }\n\n    function reqMightThrow(id) {\n      var isTopLevel = \"./\".indexOf(id.charAt(0)) < 0;\n      var presetOrPlugin;\n      var presetOrPluginMeta;\n\n      if (isTopLevel) {\n        try {\n          // If the identifier is top-level, try to prefix it with\n          // \"babel-plugin-\" or \"babel-preset-\".\n          presetOrPlugin = inputFile.require(prefix + id);\n          presetOrPluginMeta = inputFile.require(\n            packageNameFromTopLevelModuleId(prefix + id) + '/package.json');\n        } catch (e) {\n          if (e.code !== \"MODULE_NOT_FOUND\") {\n            throw e;\n          }\n          // Fall back to requiring the plugin as-is if the prefix failed.\n          presetOrPlugin = inputFile.require(id);\n          presetOrPluginMeta = inputFile.require(\n            packageNameFromTopLevelModuleId(id) + '/package.json');\n        }\n\n      } else {\n        // If the identifier is not top-level, but relative or absolute,\n        // then it will be required as-is, so that you can implement your\n        // own Babel plugins locally, rather than always using plugins\n        // installed from npm.\n        presetOrPlugin = inputFile.require(id, controlFilePath);\n\n        // Note that inputFile.readAndWatchFileWithHash converts module\n        // identifers to OS-specific paths if necessary.\n        var absId = inputFile.resolve(id, controlFilePath);\n        var info = inputFile.readAndWatchFileWithHash(absId);\n\n        presetOrPluginMeta = {\n          name: absId,\n          version: info.hash\n        };\n      }\n\n      return {\n        name: presetOrPluginMeta.name,\n        version: presetOrPluginMeta.version,\n        module: presetOrPlugin.__esModule\n          ? presetOrPlugin.default\n          : presetOrPlugin\n      };\n    }\n\n    var filtered = [];\n\n    list.forEach(function (item, i) {\n      if (typeof item === \"string\") {\n        result = req(item);\n        if (! result) return;\n        item = result.module;\n        cacheDeps[result.name] = result.version;\n      } else if (Array.isArray(item) &&\n                 typeof item[0] === \"string\") {\n        item = item.slice(); // defensive copy\n        result = req(item[0]);\n        if (! result) return;\n        item[0] = result.module;\n        cacheDeps[result.name] = result.version;\n      }\n      // else, an object { presets: [], plugins: [] } from meteorBabel, whose\n      // version is used for the cache hash internally.\n\n      filtered.push(item);\n    });\n\n    if (listName === \"plugins\") {\n      // Turn any additional plugins into their own preset, so that they\n      // can come before babel-preset-meteor.\n      inferredPresets.push({ plugins: filtered });\n    } else if (listName === \"presets\") {\n      inferredPresets.push.apply(inferredPresets, filtered);\n    }\n  }\n\n  infer(\"presets\", \"babel-preset-\");\n  infer(\"plugins\", \"babel-plugin-\");\n\n  if (inferredPresets.length > 0) {\n    babelOptions.presets.push.apply(\n      babelOptions.presets,\n      inferredPresets\n    );\n\n    return true;\n  }\n\n  return false;\n};\n\n// 'react-hot-loader/babel' => 'react-hot-loader'\nfunction packageNameFromTopLevelModuleId(id) {\n  return id.split(\"/\", 1)[0];\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\n(function (pkg, symbols) {\n  for (var s in symbols)\n    (s in pkg) || (pkg[s] = symbols[s]);\n})(Package['babel-compiler'] = {}, {\n  Babel: Babel,\n  BabelCompiler: BabelCompiler\n});\n\n})();\n\n//# sourceMappingURL=babel-compiler.js.map\n"]},"hash":"23f896f94ff1a0ac535fcee760070cff4a1dbb84"}
